@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@700;800&display=swap');

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Plus Jakarta Sans', sans-serif;
  }

  :root {
    /* Add transition to all theme color changes */
    --theme-transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, fill 0.3s ease, stroke 0.3s ease;

    /* Category-specific gradients */
    --communication-gradient: rgb(219 234 254 / 0.5), rgb(191 219 254 / 0.5);
    --teaching-gradient: rgb(220 252 231 / 0.5), rgb(187 247 208 / 0.5);
    --language-gradient: rgb(237 233 254 / 0.5), rgb(221 214 254 / 0.5);
    --reading-gradient: rgb(254 249 195 / 0.5), rgb(253 224 71 / 0.5);
    --utilities-gradient: rgb(243 244 246 / 0.5), rgb(229 231 235 / 0.5);
    --games-gradient: rgb(252 231 243 / 0.5), rgb(249 168 212 / 0.5);
  }

  /* Apply transitions to all elements */
  *,
  *::before,
  *::after {
    transition: var(--theme-transition);
  }

  /* Remove transitions from elements where it might cause issues */
  .no-theme-transition,
  .no-theme-transition *,
  .no-theme-transition *::before,
  .no-theme-transition *::after {
    transition: none !important;
  }

  /* 無障礙設置樣式 */
  .high-contrast {
    --foreground: #ffffff;
    --background: #000000;
    --border: #ffffff;
    --primary: #ffff00;
    --primary-foreground: #000000;
    --secondary: #ffffff;
    --secondary-foreground: #000000;
    --muted: #333333;
    --muted-foreground: #ffffff;
    --accent: #ffff00;
    --accent-foreground: #000000;
    --destructive: #ff0000;
    --destructive-foreground: #ffffff;
    --card: #000000;
    --card-foreground: #ffffff;
    --popover: #000000;
    --popover-foreground: #ffffff;
    --ring: #ffff00;
  }

  .reduced-motion * {
    animation: none !important;
    transition: none !important;
  }

  .dyslexic-font {
    font-family: 'OpenDyslexic', sans-serif;
    letter-spacing: 0.05em;
    word-spacing: 0.1em;
    line-height: 1.5;
  }

  /* 色盲模式濾鏡 */
  .protanopia {
    filter: url('#protanopia-filter');
  }

  .deuteranopia {
    filter: url('#deuteranopia-filter');
  }

  .tritanopia {
    filter: url('#tritanopia-filter');
  }

}

@layer utilities {
  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }

  /* --- UI/UX Pro Max Premium Animations --- */

  .bouncy-active {
    @apply active:scale-95 transition-transform duration-200 !important;
  }

  .spring-bounce {
    transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .glass-panel {
    @apply bg-white/70 backdrop-blur-md border border-white/30 shadow-xl;
  }

  .hover-float {
    @apply hover:-translate-y-1.5 hover:shadow-2xl transition-all duration-300;
  }

  .soft-shadow {
    box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1), 0 4px 10px -5px rgba(0, 0, 0, 0.04);
  }

  .clay-button {
    @apply shadow-[0_4px_0_0_rgba(0, 0, 0, 0.1)] active:shadow-none active:translate-y-[4px] transition-all;
  }
}

/* Custom driver.js styles */
.driver-popover {
  @apply rounded-lg shadow-lg border border-border !important;
}

.driver-popover-title {
  @apply text-xl font-semibold mb-2 text-foreground !important;
}

.driver-popover-description {
  @apply text-muted-foreground leading-relaxed !important;
}

.driver-popover-footer {
  @apply mt-4 !important;
}

.driver-popover-prev-btn,
.driver-popover-next-btn {
  @apply px-4 py-2 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-colors !important;
}

.driver-popover-close-btn {
  @apply p-2 rounded-md hover:bg-accent !important;
}

.driver-popover-progress-text {
  @apply text-muted-foreground !important;
}

/* 圖片延遲載入樣式 */
.lazy-image {
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.lazy-image.loaded {
  opacity: 1;
}

/* 骨架屏樣式 */
.skeleton-loading {
  @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded;
}

/* 無障礙樣式 */
.high-contrast {
  --background: #000000;
  --foreground: #ffffff;
  --primary: #ffff00;
  --muted: #444444;
}

.high-contrast .bg-muted {
  background-color: var(--muted);
}

.high-contrast .text-muted-foreground {
  color: #ffffff;
}

.reduced-motion *,
.reduced-motion *::before,
.reduced-motion *::after {
  animation-duration: 0.001ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.001ms !important;
}

.dyslexic-font {
  font-family: 'Comic Sans MS', 'Apple Chancery', 'Verdana', sans-serif;
  letter-spacing: 0.05em;
  word-spacing: 0.1em;
  line-height: 1.5;
}

/* 設定鍵盤焦點顯示 */
:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

@media (prefers-reduced-motion) {

  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
  }
}