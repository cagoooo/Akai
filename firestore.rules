rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // 訪客統計 - 所有人可讀寫（用於匿名訪客計數）
    match /visitorStats/{docId} {
      allow read: if true;
      allow write: if true;
    }
    
    // 工具使用統計 - 所有人可讀寫（用於追蹤工具點擊）
    match /toolUsageStats/{toolId} {
      allow read: if true;
      allow write: if true;
    }
    
    // 錯誤日誌 - 所有人可寫（用於前端錯誤回報），僅認證用戶可讀
    match /errorLogs/{logId} {
      allow create: if true;
      allow read, update, delete: if request.auth != null;
    }
    
    // 成就系統 - 所有人可讀，僅認證用戶可寫
    match /achievements/{achievementId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // 用戶成就 - 需要認證
    match /userAchievements/{docId} {
      allow read, write: if request.auth != null;
    }
  }
}
